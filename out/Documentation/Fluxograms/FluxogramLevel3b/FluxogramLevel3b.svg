<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1374px" preserveAspectRatio="none" style="width:1943px;height:1374px;background:#FFFFFF;" version="1.1" viewBox="0 0 1943 1374" width="1943px" zoomAndPan="magnify"><defs/><g><ellipse cx="936.25" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M1025.25,54.3711 L1025.25,63.5469 L1005.25,67.5469 L1025.25,71.5469 L1025.25,80.7227 A0,0 0 0 0 1025.25,80.7227 L1334.25,80.7227 A0,0 0 0 0 1334.25,80.7227 L1334.25,64.3711 L1324.25,54.3711 L1025.25,54.3711 A0,0 0 0 0 1025.25,54.3711 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1324.25,54.3711 L1324.25,64.3711 L1334.25,64.3711 L1324.25,54.3711 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="1031.25" y="72.8662">PPV_capacity, P_Load, Cbuy, Csell, ESSparams</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="867.25" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="877.25" y="72.457">Load current day data</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="293" x="789.75" y="105.0938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="273" x="799.75" y="127.5508">For each T in Thorizon (96 intervals of 15 minutes)</text><path d="M1083.25,156.3828 L1083.25,173.7344 L1063.25,177.7344 L1083.25,181.7344 L1083.25,199.0859 A0,0 0 0 0 1083.25,199.0859 L1346.25,199.0859 A0,0 0 0 0 1346.25,199.0859 L1346.25,166.3828 L1336.25,156.3828 L1083.25,156.3828 A0,0 0 0 0 1083.25,156.3828 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1336.25,156.3828 L1336.25,166.3828 L1346.25,166.3828 L1336.25,156.3828 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="1089.25" y="174.8779">P_Load = Prosumer usage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="1089.25" y="191.2295">PPV_capacity = Maximum PV production</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="254" x="809.25" y="160.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="234" x="819.25" y="182.6445">Get P_Load[T, PL] and PPV_capacity[T, PL]</text><path d="M1102.25,223.457 L1102.25,232.6328 L1082.25,236.6328 L1102.25,240.6328 L1102.25,249.8086 A0,0 0 0 0 1102.25,249.8086 L1410.25,249.8086 A0,0 0 0 0 1410.25,249.8086 L1410.25,233.457 L1400.25,223.457 L1102.25,223.457 A0,0 0 0 0 1102.25,223.457 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1400.25,223.457 L1400.25,233.457 L1410.25,233.457 L1400.25,223.457 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="1108.25" y="241.9521">P_PV_load + P_PV_ESS = PPV_capacity[T, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="292" x="790.25" y="219.0859"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="272" x="800.25" y="241.543">Calculate P_PV_load[T, PL] and P_PV_ESS[T, PL]</text><polygon fill="#F1F1F1" points="883.25,274.1797,989.25,274.1797,1001.25,286.1797,989.25,298.1797,883.25,298.1797,871.25,286.1797,883.25,274.1797" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="106" x="883.25" y="290.6807">P_PV_ESS[T, PL] &gt; 0?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="851.25" y="283.7627">Yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13" x="1001.25" y="283.7627">No</text><path d="M643.125,308.1797 L643.125,325.5313 L623.125,329.5313 L643.125,333.5313 L643.125,350.8828 A0,0 0 0 0 643.125,350.8828 L959.125,350.8828 A0,0 0 0 0 959.125,350.8828 L959.125,318.1797 L949.125,308.1797 L643.125,308.1797 A0,0 0 0 0 643.125,308.1797 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M949.125,308.1797 L949.125,318.1797 L959.125,318.1797 L949.125,308.1797 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="649.125" y="326.6748">P_ESS_ch = P_PV_ESS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="649.125" y="343.0264">Limited by ESSparams[2, PL] * ESSparams[3, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="455.125" y="311.9844"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="148" x="465.125" y="334.4414">Calculate P_ESS_ch[T, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="475.125" y="385.8828"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="485.125" y="408.3398">I_ESS_ch[T, PL] = 1</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="471.625" y="455.9766"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115" x="481.625" y="478.4336">I_ESS_dch[T, PL] = 0</text><polygon fill="#F1F1F1" points="1250.375,308.1797,1416.375,308.1797,1428.375,320.1797,1416.375,332.1797,1250.375,332.1797,1238.375,320.1797,1250.375,308.1797" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="166" x="1250.375" y="324.6807">P_Load[T, PL] &gt; P_PV_load[T, PL]?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1218.375" y="317.7627">Yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13" x="1428.375" y="317.7627">No</text><path d="M1184.125,346.5508 L1184.125,355.7266 L1164.125,359.7266 L1184.125,363.7266 L1184.125,372.9023 A0,0 0 0 0 1184.125,372.9023 L1500.125,372.9023 A0,0 0 0 0 1500.125,372.9023 L1500.125,356.5508 L1490.125,346.5508 L1184.125,346.5508 A0,0 0 0 0 1184.125,346.5508 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1490.125,346.5508 L1490.125,356.5508 L1500.125,356.5508 L1490.125,346.5508 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="1190.125" y="365.0459">Limited by ESSparams[2, PL] * ESSparams[3, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="175" x="989.125" y="342.1797"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="155" x="999.125" y="364.6367">Calculate P_ESS_dch[T, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="1009.125" y="412.2734"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115" x="1019.125" y="434.7305">I_ESS_dch[T, PL] = 1</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="1012.625" y="482.3672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="1022.625" y="504.8242">I_ESS_ch[T, PL] = 0</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="1523.625" y="342.1797"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="1533.625" y="364.6367">P_ESS_ch[T, PL] = 0</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="1520.125" y="412.2734"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="1530.125" y="434.7305">P_ESS_dch[T, PL] = 0</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="1526.125" y="482.3672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="1536.125" y="504.8242">I_ESS_ch[T, PL] = 0</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="1522.625" y="537.4609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115" x="1532.625" y="559.918">I_ESS_dch[T, PL] = 0</text><polygon fill="#F1F1F1" points="1333.375,578.5547,1345.375,590.5547,1333.375,602.5547,1321.375,590.5547,1333.375,578.5547" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="936.25,608.5547,948.25,620.5547,936.25,632.5547,924.25,620.5547,936.25,608.5547" style="stroke:#181818;stroke-width:0.5;"/><path d="M1023.75,648.75 L1023.75,666.1016 L1003.75,670.1016 L1023.75,674.1016 L1023.75,691.4531 A0,0 0 0 0 1023.75,691.4531 L1726.75,691.4531 A0,0 0 0 0 1726.75,691.4531 L1726.75,658.75 L1716.75,648.75 L1023.75,648.75 A0,0 0 0 0 1023.75,648.75 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1716.75,648.75 L1716.75,658.75 L1726.75,658.75 L1716.75,648.75 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="682" x="1029.75" y="667.2451">SOC[T, PL] = SOC[T-1, PL] + &#916;T * (ESSparams[1, PL] * P_ESS_ch[T, PL] - P_ESS_dch[T, PL] / ESSparams[1, PL])</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="1029.75" y="683.5967">Minimum SOC = ESSparams[4, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="868.75" y="652.5547"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115" x="878.75" y="675.0117">Calculate SOC[T, PL]</text><path d="M1025.75,715.8242 L1025.75,725 L1005.75,729 L1025.75,733 L1025.75,742.1758 A0,0 0 0 0 1025.75,742.1758 L1784.75,742.1758 A0,0 0 0 0 1784.75,742.1758 L1784.75,725.8242 L1774.75,715.8242 L1025.75,715.8242 A0,0 0 0 0 1025.75,715.8242 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1774.75,715.8242 L1774.75,725.8242 L1784.75,725.8242 L1774.75,715.8242 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="738" x="1031.75" y="734.3193">P_Load[T, PL] = P_PV_load[T, PL] + P_ESS_dch[T, PL] + P_buy[T, PL] - P_sell[T, PL] + P_peer_in[T, PL] - P_peer_out[T, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="866.75" y="711.4531"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="119" x="876.75" y="733.9102">Calculate net balance</text><polygon fill="#F1F1F1" points="804.25,766.5469,1068.25,766.5469,1080.25,778.5469,1068.25,790.5469,804.25,790.5469,792.25,778.5469,804.25,766.5469" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="264" x="804.25" y="783.0479">P_Load[T, PL] &gt; P_PV_load[T, PL] + P_ESS_dch[T, PL]?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="772.25" y="776.1299">Yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13" x="1080.25" y="776.1299">No</text><polygon fill="#F1F1F1" points="245.25,800.5469,406.25,800.5469,418.25,812.5469,406.25,824.5469,245.25,824.5469,233.25,812.5469,245.25,800.5469" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="161" x="245.25" y="817.0479">Community has available energy?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="213.25" y="810.1299">Yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13" x="418.25" y="810.1299">No</text><path d="M189,838.918 L189,848.0938 L169,852.0938 L189,856.0938 L189,865.2695 A0,0 0 0 0 189,865.2695 L459,865.2695 A0,0 0 0 0 459,865.2695 L459,848.918 L449,838.918 L189,838.918 A0,0 0 0 0 189,838.918 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M449,838.918 L449,848.918 L459,848.918 L449,838.918 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="195" y="857.4131">P_peer_in = Energy from another prosumer</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="11" y="834.5469"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="138" x="21" y="857.0039">Receive P_peer_in[T, PL]</text><path d="M664,834.5469 L664,851.8984 L644,855.8984 L664,859.8984 L664,877.25 A0,0 0 0 0 664,877.25 L862,877.25 A0,0 0 0 0 862,877.25 L862,844.5469 L852,834.5469 L664,834.5469 A0,0 0 0 0 664,834.5469 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M852,834.5469 L852,844.5469 L862,844.5469 L852,834.5469 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="670" y="853.042">P_buy limited to 12.5 kW</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="670" y="869.3936">Cost = Cbuy[T] * P_buy[T, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="479" y="838.3516"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="145" x="489" y="860.8086">Buy P_buy[T, PL] from Grid</text><polygon fill="#F1F1F1" points="325.75,883.25,337.75,895.25,325.75,907.25,313.75,895.25,325.75,883.25" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="1409.25,800.5469,1684.25,800.5469,1696.25,812.5469,1684.25,824.5469,1409.25,824.5469,1397.25,812.5469,1409.25,800.5469" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="275" x="1409.25" y="817.0479">PPV_capacity[T, PL] &gt; P_Load[T, PL] + P_PV_ESS[T, PL]?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1377.25" y="810.1299">Yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13" x="1696.25" y="810.1299">No</text><polygon fill="#F1F1F1" points="1158.5,834.5469,1286.5,834.5469,1298.5,846.5469,1286.5,858.5469,1158.5,858.5469,1146.5,846.5469,1158.5,834.5469" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="1158.5" y="851.0479">Community needs energy?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1126.5" y="844.1299">Yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13" x="1298.5" y="844.1299">No</text><path d="M1082,872.918 L1082,882.0938 L1062,886.0938 L1082,890.0938 L1082,899.2695 A0,0 0 0 0 1082,899.2695 L1362,899.2695 A0,0 0 0 0 1362,899.2695 L1362,882.918 L1352,872.918 L1082,872.918 A0,0 0 0 0 1082,872.918 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1352,872.918 L1352,882.918 L1362,882.918 L1352,872.918 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="1088" y="891.4131">P_peer_out limited by excess PPV_capacity</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="912" y="868.5469"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="922" y="891.0039">Send P_peer_out[T, PL]</text><path d="M1554,868.5469 L1554,885.8984 L1534,889.8984 L1554,893.8984 L1554,911.25 A0,0 0 0 0 1554,911.25 L1772,911.25 A0,0 0 0 0 1772,911.25 L1772,878.5469 L1762,868.5469 L1554,868.5469 A0,0 0 0 0 1554,868.5469 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1762,868.5469 L1762,878.5469 L1772,878.5469 L1762,868.5469 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="1560" y="887.042">P_sell limited to 10.5 kW</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="1560" y="903.3936">Revenue = Csell[T] * P_sell[T, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="1382" y="872.3516"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="1392" y="894.8086">Sell P_sell[T, PL] to Grid</text><polygon fill="#F1F1F1" points="1222.5,917.25,1234.5,929.25,1222.5,941.25,1210.5,929.25,1222.5,917.25" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="1809.75" y="834.5469"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="88" x="1819.75" y="857.0039">P_buy[T, PL] = 0</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="1809.25" y="904.6406"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="1819.25" y="927.0977">P_sell[T, PL] = 0</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="1798.25" y="961.25"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111" x="1808.25" y="983.707">P_peer_in[T, PL] = 0</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="1794.75" y="1016.3438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="1804.75" y="1038.8008">P_peer_out[T, PL] = 0</text><polygon fill="#F1F1F1" points="1546.75,1057.4375,1558.75,1069.4375,1546.75,1081.4375,1534.75,1069.4375,1546.75,1057.4375" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="936.25,1087.4375,948.25,1099.4375,936.25,1111.4375,924.25,1099.4375,936.25,1087.4375" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="869" x="501.75" y="1131.4375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="849" x="511.75" y="1153.8945">Store P_buy[T, PL], P_sell[T, PL], SOC[T, PL], P_ESS_ch[T, PL], P_ESS_dch[T, PL], P_PV_load[T, PL], P_PV_ESS[T, PL], P_peer_in[T, PL], P_peer_out[T, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="54" x="909.25" y="1186.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="919.25" y="1208.9883">Next T</text><path d="M1036.75,1235.9961 L1036.75,1245.1719 L1016.75,1249.1719 L1036.75,1253.1719 L1036.75,1262.3477 A0,0 0 0 0 1036.75,1262.3477 L1336.75,1262.3477 A0,0 0 0 0 1336.75,1262.3477 L1336.75,1245.9961 L1326.75,1235.9961 L1036.75,1235.9961 A0,0 0 0 0 1036.75,1235.9961 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1326.75,1235.9961 L1326.75,1245.9961 L1336.75,1245.9961 L1326.75,1235.9961 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="1042.75" y="1254.4912">SOC_end_of_day[PL, day] = SOC[Thorizon, PL]</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="855.75" y="1231.625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141" x="865.75" y="1254.082">Save final SOC for the day</text><path d="M1032.25,1291.0898 L1032.25,1300.2656 L1012.25,1304.2656 L1032.25,1308.2656 L1032.25,1317.4414 A0,0 0 0 0 1032.25,1317.4414 L1457.25,1317.4414 A0,0 0 0 0 1457.25,1317.4414 L1457.25,1301.0898 L1447.25,1291.0898 L1032.25,1291.0898 A0,0 0 0 0 1032.25,1291.0898 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1447.25,1291.0898 L1447.25,1301.0898 L1457.25,1301.0898 L1447.25,1291.0898 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="404" x="1038.25" y="1309.585">Sum(Cbuy[T] * P_buy[T, PL] - Csell[T] * P_sell[T, PL]) for all T and PL</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="860.25" y="1286.7188"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="870.25" y="1309.1758">Calculate total daily cost</text><ellipse cx="936.25" cy="1352.8125" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="936.25" cy="1352.8125" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="30" y2="50"/><polygon fill="#181818" points="932.25,40,936.25,50,940.25,40,936.25,44" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="85.0938" y2="105.0938"/><polygon fill="#181818" points="932.25,95.0938,936.25,105.0938,940.25,95.0938,936.25,99.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="140.1875" y2="160.1875"/><polygon fill="#181818" points="932.25,150.1875,936.25,160.1875,940.25,150.1875,936.25,154.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="195.2813" y2="219.0859"/><polygon fill="#181818" points="932.25,209.0859,936.25,219.0859,940.25,209.0859,936.25,213.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="539.125" x2="539.125" y1="347.0781" y2="385.8828"/><polygon fill="#181818" points="535.125,375.8828,539.125,385.8828,543.125,375.8828,539.125,379.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="539.125" x2="539.125" y1="420.9766" y2="455.9766"/><polygon fill="#181818" points="535.125,445.9766,539.125,455.9766,543.125,445.9766,539.125,449.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1076.625" x2="1076.625" y1="377.2734" y2="412.2734"/><polygon fill="#181818" points="1072.625,402.2734,1076.625,412.2734,1080.625,402.2734,1076.625,406.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1076.625" x2="1076.625" y1="447.3672" y2="482.3672"/><polygon fill="#181818" points="1072.625,472.3672,1076.625,482.3672,1080.625,472.3672,1076.625,476.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1590.125" x2="1590.125" y1="377.2734" y2="412.2734"/><polygon fill="#181818" points="1586.125,402.2734,1590.125,412.2734,1594.125,402.2734,1590.125,406.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1590.125" x2="1590.125" y1="447.3672" y2="482.3672"/><polygon fill="#181818" points="1586.125,472.3672,1590.125,482.3672,1594.125,472.3672,1590.125,476.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1590.125" x2="1590.125" y1="517.4609" y2="537.4609"/><polygon fill="#181818" points="1586.125,527.4609,1590.125,537.4609,1594.125,527.4609,1590.125,531.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1238.375" x2="1076.625" y1="320.1797" y2="320.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="1076.625" x2="1076.625" y1="320.1797" y2="342.1797"/><polygon fill="#181818" points="1072.625,332.1797,1076.625,342.1797,1080.625,332.1797,1076.625,336.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1428.375" x2="1590.125" y1="320.1797" y2="320.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="1590.125" x2="1590.125" y1="320.1797" y2="342.1797"/><polygon fill="#181818" points="1586.125,332.1797,1590.125,342.1797,1594.125,332.1797,1590.125,336.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1076.625" x2="1076.625" y1="517.4609" y2="590.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="1076.625" x2="1321.375" y1="590.5547" y2="590.5547"/><polygon fill="#181818" points="1311.375,586.5547,1321.375,590.5547,1311.375,594.5547,1315.375,590.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1590.125" x2="1590.125" y1="572.5547" y2="590.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="1590.125" x2="1345.375" y1="590.5547" y2="590.5547"/><polygon fill="#181818" points="1355.375,586.5547,1345.375,590.5547,1355.375,594.5547,1351.375,590.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="871.25" x2="539.125" y1="286.1797" y2="286.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="539.125" x2="539.125" y1="286.1797" y2="311.9844"/><polygon fill="#181818" points="535.125,301.9844,539.125,311.9844,543.125,301.9844,539.125,305.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1001.25" x2="1333.375" y1="286.1797" y2="286.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="1333.375" x2="1333.375" y1="286.1797" y2="308.1797"/><polygon fill="#181818" points="1329.375,298.1797,1333.375,308.1797,1337.375,298.1797,1333.375,302.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="539.125" x2="539.125" y1="491.0703" y2="620.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="539.125" x2="924.25" y1="620.5547" y2="620.5547"/><polygon fill="#181818" points="914.25,616.5547,924.25,620.5547,914.25,624.5547,918.25,620.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1333.375" x2="1333.375" y1="602.5547" y2="620.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="1333.375" x2="948.25" y1="620.5547" y2="620.5547"/><polygon fill="#181818" points="958.25,616.5547,948.25,620.5547,958.25,624.5547,954.25,620.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="254.1797" y2="274.1797"/><polygon fill="#181818" points="932.25,264.1797,936.25,274.1797,940.25,264.1797,936.25,268.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="632.5547" y2="652.5547"/><polygon fill="#181818" points="932.25,642.5547,936.25,652.5547,940.25,642.5547,936.25,646.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="687.6484" y2="711.4531"/><polygon fill="#181818" points="932.25,701.4531,936.25,711.4531,940.25,701.4531,936.25,705.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="233.25" x2="90" y1="812.5469" y2="812.5469"/><line style="stroke:#181818;stroke-width:1.0;" x1="90" x2="90" y1="812.5469" y2="834.5469"/><polygon fill="#181818" points="86,824.5469,90,834.5469,94,824.5469,90,828.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.25" x2="561.5" y1="812.5469" y2="812.5469"/><line style="stroke:#181818;stroke-width:1.0;" x1="561.5" x2="561.5" y1="812.5469" y2="838.3516"/><polygon fill="#181818" points="557.5,828.3516,561.5,838.3516,565.5,828.3516,561.5,832.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="90" x2="90" y1="869.6406" y2="895.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="90" x2="313.75" y1="895.25" y2="895.25"/><polygon fill="#181818" points="303.75,891.25,313.75,895.25,303.75,899.25,307.75,895.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="561.5" x2="561.5" y1="873.4453" y2="895.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="561.5" x2="337.75" y1="895.25" y2="895.25"/><polygon fill="#181818" points="347.75,891.25,337.75,895.25,347.75,899.25,343.75,895.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1146.5" x2="987" y1="846.5469" y2="846.5469"/><line style="stroke:#181818;stroke-width:1.0;" x1="987" x2="987" y1="846.5469" y2="868.5469"/><polygon fill="#181818" points="983,858.5469,987,868.5469,991,858.5469,987,862.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1298.5" x2="1458" y1="846.5469" y2="846.5469"/><line style="stroke:#181818;stroke-width:1.0;" x1="1458" x2="1458" y1="846.5469" y2="872.3516"/><polygon fill="#181818" points="1454,862.3516,1458,872.3516,1462,862.3516,1458,866.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="987" x2="987" y1="903.6406" y2="929.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="987" x2="1210.5" y1="929.25" y2="929.25"/><polygon fill="#181818" points="1200.5,925.25,1210.5,929.25,1200.5,933.25,1204.5,929.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1458" x2="1458" y1="907.4453" y2="929.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="1458" x2="1234.5" y1="929.25" y2="929.25"/><polygon fill="#181818" points="1244.5,925.25,1234.5,929.25,1244.5,933.25,1240.5,929.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1863.75" x2="1863.75" y1="869.6406" y2="904.6406"/><polygon fill="#181818" points="1859.75,894.6406,1863.75,904.6406,1867.75,894.6406,1863.75,898.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1863.75" x2="1863.75" y1="939.7344" y2="961.25"/><polygon fill="#181818" points="1859.75,951.25,1863.75,961.25,1867.75,951.25,1863.75,955.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1863.75" x2="1863.75" y1="996.3438" y2="1016.3438"/><polygon fill="#181818" points="1859.75,1006.3438,1863.75,1016.3438,1867.75,1006.3438,1863.75,1010.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1397.25" x2="1222.5" y1="812.5469" y2="812.5469"/><line style="stroke:#181818;stroke-width:1.0;" x1="1222.5" x2="1222.5" y1="812.5469" y2="834.5469"/><polygon fill="#181818" points="1218.5,824.5469,1222.5,834.5469,1226.5,824.5469,1222.5,828.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1696.25" x2="1863.75" y1="812.5469" y2="812.5469"/><line style="stroke:#181818;stroke-width:1.0;" x1="1863.75" x2="1863.75" y1="812.5469" y2="834.5469"/><polygon fill="#181818" points="1859.75,824.5469,1863.75,834.5469,1867.75,824.5469,1863.75,828.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1222.5" x2="1222.5" y1="941.25" y2="1069.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1222.5" x2="1534.75" y1="1069.4375" y2="1069.4375"/><polygon fill="#181818" points="1524.75,1065.4375,1534.75,1069.4375,1524.75,1073.4375,1528.75,1069.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1863.75" x2="1863.75" y1="1051.4375" y2="1069.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1863.75" x2="1558.75" y1="1069.4375" y2="1069.4375"/><polygon fill="#181818" points="1568.75,1065.4375,1558.75,1069.4375,1568.75,1073.4375,1564.75,1069.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="792.25" x2="325.75" y1="778.5469" y2="778.5469"/><line style="stroke:#181818;stroke-width:1.0;" x1="325.75" x2="325.75" y1="778.5469" y2="800.5469"/><polygon fill="#181818" points="321.75,790.5469,325.75,800.5469,329.75,790.5469,325.75,794.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1080.25" x2="1546.75" y1="778.5469" y2="778.5469"/><line style="stroke:#181818;stroke-width:1.0;" x1="1546.75" x2="1546.75" y1="778.5469" y2="800.5469"/><polygon fill="#181818" points="1542.75,790.5469,1546.75,800.5469,1550.75,790.5469,1546.75,794.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="325.75" x2="325.75" y1="907.25" y2="1099.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="325.75" x2="924.25" y1="1099.4375" y2="1099.4375"/><polygon fill="#181818" points="914.25,1095.4375,924.25,1099.4375,914.25,1103.4375,918.25,1099.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1546.75" x2="1546.75" y1="1081.4375" y2="1099.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1546.75" x2="948.25" y1="1099.4375" y2="1099.4375"/><polygon fill="#181818" points="958.25,1095.4375,948.25,1099.4375,958.25,1103.4375,954.25,1099.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="746.5469" y2="766.5469"/><polygon fill="#181818" points="932.25,756.5469,936.25,766.5469,940.25,756.5469,936.25,760.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="1111.4375" y2="1131.4375"/><polygon fill="#181818" points="932.25,1121.4375,936.25,1131.4375,940.25,1121.4375,936.25,1125.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="1166.5313" y2="1186.5313"/><polygon fill="#181818" points="932.25,1176.5313,936.25,1186.5313,940.25,1176.5313,936.25,1180.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="1266.7188" y2="1286.7188"/><polygon fill="#181818" points="932.25,1276.7188,936.25,1286.7188,940.25,1276.7188,936.25,1280.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936.25" x2="936.25" y1="1321.8125" y2="1341.8125"/><polygon fill="#181818" points="932.25,1331.8125,936.25,1341.8125,940.25,1331.8125,936.25,1335.8125" style="stroke:#181818;stroke-width:1.0;"/><!--SRC=[bLRXRjis4FwlfxX_iHTrYxjrm6Ai0-9bHG2tDMglHP4C1YsT8ouIQL2K5_SvzbnxfjrHgaHHCh3z2MBUyUwxZtUVhdoIwY2CAA3GIYUPqGM2DHL6PMlPYUJfqUXAfGkTQmD_PT9Y55t0sWfZGU_1PWW7enCiIzYJXrO8gJZ1HLIoItIzr2A5f386bNMML5WnZvIs24O-PlOQLgkFsqGSH2BjAORLbg_4iDXLz6jHOfx7SBjUEqGb9rzgVN39K2GPM4cufR9eZYA7oGP-XXbO3PjC6_b5gobXkVxjg_U6N5iJJ7xwiRrQSZcpLr18LLaiftDEjJAwh0eqSASEbIqvr1kq3SRx3Q5T_W52fRqQclEWI7U5mBKXgr8yueFoRvBvhNYMHLN0wYFpcbQ9bLenb5ynaINzJnIp4HMQnrCTX64jH9vKkQ24gor5p4DyV4Widi7Mt83Brf6H3cjY83V24cCdc93NbF0gGb3mwrv4SW-J81EyXgjVfjmdHFTduZK2w84brssIjRW0-iXgCwDfuZwefIoe3LFOdRg-k7zPP_l6E_g-XapvxlfPk4NctNdg6wxc4UObmkITPgXrHVvhlnuG79OtKc3Qgx1Vu_ykPnpuREwRWf80_AB8QpNkrLhICTFTsKjtPowXIkK-glzIw_n-I9cJNTD1917qYyOkoOG9stZzVZ7QhDqv9N4_NipgdvVmpzyRecpISJRxIcDOxul1my1t4DwRFgYtKhbnf4IKhdFueHs7Tfvlwucy4RbGIL2C8j7OrOOnMUWA6WplvH0e7v4u-gMmIlhc0wBPIkMxk2DTMM-IVKb9T55KYZK8d-avb7kE_zBz8mZ3WU0mYpP-9aeGHo5piSknqR6H4Vg02SeZ3eeP3b3hmIzKFyAUlcQaUvg26jPHzqB3ARYfJdqktRqtHgPZMSWFycPOwGCpU_djAtZwzA0MkhIKUk7YrCtMXUo685ILeRewTfS1jJqr7VBKvrOXfkLPJgdYDRgFGT0CyyOymYevjKNlN7Fmfzu7x-xsYNM9yZneJEAiepPCneuzTgyQTZ_W4LM5J70Th6RO2rm3S2IFw9ptkhx8-S3yys1o1gQEj3CQjxRQK5rOLhcjTw9sETcmADHs7rVSBoVs92uEXIiU35iycCWux9fuC4JnM0yG-5lg3jxgUAVAUSqYmE_msS9c7gLeQOFolEezxtejQ4htKb61h99SCM-5P1q8zvPOskhzbcptgsNCFgsADpjPAqwTUAQa5IVGkp-Hbg5ZeAnMMqfSkoGqY47EgfYCpoLfuhb-cheQHCuFvdQdPKJRh3v4_m80]--></g></svg>